<!DOCTYPE html>
<html>
    <head>
        <title>Mathal Combat!</title>
        <link rel="icon" href="./resources/favicon.png" type="image/png">
        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 20px;
                padding-top: 60px; /* to avoid overlap with fixed header */
                background-color: #222222;
                color: white;
                width: 100%-10px;
            }
            
            .header {
                background-color: #333333;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                padding: 10px;
                font-size: 24px;
                font-weight: bold;
                margin-bottom: 20px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                z-index: 1000;
            }

            .goback {
                background-color: #222222;
                top: 0;
                color:white;
                left: 0;
                padding: 10px;
                font-size: 24px;
                font-weight: bold;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                z-index: 1000;
                border: none;
                border-radius: 10px;
                cursor: pointer;
            }
            
            canvas {
                background-color: #111111;
                display: block;
            }

            input {
                margin: 5px;
                background-color:#000000;
                padding: 5px;
                border-radius: 3px;
                border:0;
                color: white;

            }

            .launch {
                border-radius: 5px;
                border:none;
                background-image: linear-gradient(blue, green);
                color: white;
                padding: 10px 20px;
                font-size: 16px;
                cursor: pointer;
            }

            .launch:active {
                background-image: linear-gradient(darkblue, darkgreen);
            }

        </style>
    </head>
    <body onload="resizeCanvas()" id="body">
        <div class="header" id="header"><button class="goback" title="Go Back to All Simulations" onclick="javascript:window.location.href='../'">Physics Simulations</button></div>
        <div id="menu"></div>

        <h1>Mathal Combat!</h1>
        Fight and do math!<br>

        <canvas id="simulationCanvas" width="800" height="600" style="border:1px solid #000000;">
            Your browser does not support the HTML5 canvas tag.
        </canvas><br>
        <input class="launch" id="go" value="Fight!" onclick="run()">

        <script>
            function resizeCanvas() {
                const canvas = document.getElementById('simulationCanvas');
                canvas.width = document.getElementById("body").offsetWidth;
            }

            const canvas = document.getElementById('simulationCanvas');
            const ctx = canvas.getContext('2d');

            //idea: Tank game with ammunition, but when you run out, you have to solve math problems to reload.
            
            var ammunition = 20;

            var x = 0; y = 0; vx = 0; vy = 0;

            var recoilForce = 5; // newtons

            var tankMass = 100; // kg

            var timeStep = 1 / 60; // 60 fps

            var turretMass = 0; // determine based on type; three or four types

            var naturalDeceleration = 0;

            var image = new Image();


            
            function fire()
            {
                if (ammunition > 0) 
                {
                    ammunition--;
                }
                else
                {
                    ammunition = 0; // preventing possibility of negative ammo
                    
                }
            }

            function run()
            {
                // initialize variables
                x = 0;
                y = 0;
                vx = 0;
                vy = 0;
                facing = 0; // angle (radians) since degrees are FAKE
                ammunition = 20; //may need to decrease later
                
                const interval = setInterval(() => {
                    // update positions with velocity
                    this.x += this.vx * timeStep;
                    this.y += this.vy * timeStep;
                    console.log(`x: ${x}, y: ${y}`);

                }, timeStep * 1000);
            }

            function move(ax, ay)
            {
                this.vx += ax * timeStep;
                this.vy += ay * timeStep;
            }

            function moveMG(a, theta)
            {
                move(a * Math.cos(theta), a * Math.sin(theta));
            }

            function renderTank()
            {
                ctx.drawImage(img)
            }

            document.addEventListener("keypress", function(e)
            {

                console.log("key pressed:" + e.key);
                switch (e.key) // for now, move simply in fixed direction
                {
                    case "w":
                    case "W": move(0, 2); break;
                    case "s":
                    case "S": move(0, -2); break;
                    case "a":
                    case "A": move(2, 0); break;
                    case "d":
                    case "D": move(0, 2); break;
                    default: break;
                }

            });

        </script>

    </body>
</html>